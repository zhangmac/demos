<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>test</title>
  <style>
  .container {
    width: 600px;
    margin: 20px auto;
  }
  .images {
    padding: 0;
  }
  .images>li {
    float: left;
    list-style: none;
    margin-right: 14px;
    margin-bottom: 20px;
  }
  .clearfix:after {
    content: '';
    display: block;
    clear: both;
  }
  </style>
</head>
<body>
  <div class="container">
    <ul class="images clearfix">
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"  id=a
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.0" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.1" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.2" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.3" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.4" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.5" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.6" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.7" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.8" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.9" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.10" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.11" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.12" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.13" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" 
                                      data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.14" alt=""></a></li>
      <li><a href="javascript:;"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"                                data-src="http://www.placehold.it/286x222/8B7355/B23AEE/&text=NO.15" alt=""></a></li>
    </ul>
  </div>









<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script>


function Exposure($target,callback) {
   this.$target = $target
   this.callback= callback
   this.bind()
   this.check()

}
Exposure.prototype = {
  bind: function() {
    var _this = this
    $(window).on('scroll',function() {
        _this.check()
    })
  },

  check: function() {
    if (this.isVisible(this.$target) && !this.isLoaded(this.$target)) {
       this.callback(this.$target)
    };
  },

  isVisible: function($node) {
    var scroHeight = $(window).scrollTop()
    var windowHeight = $(window).height()
    var $nodeTop = $node.offset().top
    if( $nodeTop <scroHeight+windowHeight && $nodeTop > scroHeight) {
        return true
      }  
        return false
  },

  isLoaded: function($node) {
     return $node.attr('src') === $node.attr('data-src')
  },

  imgShow: function($node) {
    $node.attr('src',$node.attr('data-src'))
  }
}

var lazyRender = (function() {

   return {
    start: function($targets,callback) {
     $targets.each(function(idx,target) {
     new Exposure($(target),callback)
     })
    }
  }
})()
 lazyRender.start($('.container img'),function($node) {
   this.imgShow($node)
 })



 //  lazyRender()
 //  var clock
  
 //  $(window).on('scroll',function() {
 //    if (clock) {
 //      clearTimeout(clock)
 //    }
 //       clock = setTimeout(function() {
 //        console.log('hello')
 //        lazyRender()
 //      },300)
 //  })
  


 //  function lazyRender() {
 //     $('.images img').each(function() {
 //      if(  isVisible($(this)) && !isLoaded($(this))  ){
 //        imgShow($(this))
 //      }
 //    })   
 //  }

 // function isVisible($node) {
 //      var scroHeight = $(window).scrollTop()
 //      var windowHeight = $(window).height()
 //      var $nodeTop = $node.offset().top

 //      if( $nodeTop <scroHeight+windowHeight && $nodeTop > scroHeight) {
 //        return true
 //      }  
 //        return false
 //  }  

 // function isLoaded($node) {
 //   return $node.attr('src') === $node.attr('data-src')
 // }

 // function imgShow($node) {
 //  $node.attr('src',$node.attr('data-src'))
 // }

</script>
</body>
</html>